<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="head">
    <xacro:include filename="$(find realsense2_description)/urdf/_d415.urdf.xacro"/>

    <xacro:macro name="head">

        <link name="head_pan_link">
            <inertial>
                <origin rpy="0 0 0" xyz="0.0321 0.0161 0.0390" />
                <mass value="2.2556" />
                <inertia ixx="0.0129" ixy="0.0002" ixz="0.0007" iyy="0.0095" iyz="-0.0" izz="0.0184" />
            </inertial>
            <visual>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <mesh filename="package://fetch_description/meshes/head_pan_link.dae" />
                </geometry>
                <material name="">
                    <color rgba="0.356 0.361 0.376 1" />
                </material>
            </visual>
            <collision>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <mesh filename="package://fetch_description/meshes/head_pan_link_collision.STL" />
                </geometry>
            </collision>
        </link>

        <joint name="head_pan_joint" type="revolute">
            <origin rpy="0 0 0" xyz="0.053125 0 0.603001417713939" />
            <parent link="torso_lift_link" />
            <child link="head_pan_link" />
            <axis xyz="0 0 1" />
            <limit effort="0.32" lower="-1.57" upper="1.57" velocity="1.57" />
        </joint>

        <transmission name="head_pan_joint_tran">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="head_pan_joint">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="head_pan_joint_motor">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>

        <link name="head_computer_link">
            <inertial>
                <origin rpy="0 0 0" xyz="0.0321 0.0161 0.0390" />
                <!-- Estimate -->
                <mass value="0.5" />
                <inertia ixx="0.0129" ixy="0.0002" ixz="0.0007" iyy="0.0095" iyz="-0.0" izz="0.0184" />
            </inertial>
            <visual>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <box size="0.105 0.105 0.066"/>
                </geometry>
                <material name="">
                    <color rgba="1.0 1.0 1.0 1" />
                </material>
            </visual>
            <collision>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <box size="0.105 0.105 0.066"/>
                </geometry>
            </collision>
        </link>

        <joint name="head_computer_link" type="fixed">
            <origin rpy="0.0 0.0 0.0" xyz="-0.05 0 0.13" />
            <parent link="head_pan_link" />
            <child link="head_computer_link" />
        </joint>

       <link name="head_display_link">
            <inertial>
                <origin rpy="0 0 0" xyz="0.0321 0.0161 0.0390" />
                <mass value="1.0" />
                <inertia ixx="0.0129" ixy="0.0002" ixz="0.0007" iyy="0.0095" iyz="-0.0" izz="0.0184" />
            </inertial>
            <visual>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <box size="0.02 0.23 0.1524"/>
                </geometry>
                <material name="">
                    <color rgba="1.0 1.0 1.0 1" />
                </material>
            </visual>
            <collision>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <box size="0.1524 0.23 0.02"/>
                </geometry>
            </collision>
        </link>

        <joint name="head_display_link_joint" type="fixed">
            <origin rpy="0.0 -0.6 0.0" xyz="0.05 0 0.19" />
            <parent link="head_pan_link" />
            <child link="head_display_link" />
        </joint>


        <link name="head_tilt_link">
            <inertial>
                <origin rpy="0 0 0" xyz="0.0081 0.0025 0.0113" />
                <mass value="0.9087" />
                <inertia ixx="0.0061" ixy="-0.0" ixz="0.0002" iyy="0.0014" iyz="-0.0001" izz="0.0061" />
            </inertial>
            <visual>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <mesh filename="package://fetch_description/meshes/head_tilt_link.dae" />
                </geometry>
                <material name="">
                    <color rgba="0.086 0.506 0.767 1" />
                </material>
            </visual>
            <collision>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <mesh filename="package://fetch_description/meshes/head_tilt_link_collision.STL" />
                </geometry>
            </collision>
        </link>


        <joint name="head_tilt_joint" type="revolute">
            <origin rpy="0 0 0" xyz="0.14253 0 0.057999" />
            <parent link="head_pan_link" />
            <child link="head_tilt_link" />
            <axis xyz="0 1 0" />
            <limit effort="0.68" lower="-0.76" upper="1.45" velocity="1.57" />
        </joint>

        <transmission name="head_tilt_joint_tran">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="head_tilt_joint">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="head_tilt_joint_motor">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>

        <link name="head_camera_link" />

        <joint name="head_camera_joint" type="fixed">
            <origin rpy="0 0 0" xyz="0.055 0 0.0225" />
            <parent link="head_tilt_link" />
            <child link="head_camera_link" />
        </joint>

        <link name="head_camera_rgb_frame" />

        <joint name="head_camera_rgb_joint" type="fixed">
            <origin rpy="0 0 0" xyz="0 0.02 0" />
            <parent link="head_camera_link" />
            <child link="head_camera_rgb_frame" />
        </joint>

        <link name="head_camera_rgb_optical_frame" />

        <joint name="head_camera_rgb_optical_joint" type="fixed">
            <origin rpy="-1.57079632679 0 -1.57079632679" xyz="0 0 0" />
            <parent link="head_camera_rgb_frame" />
            <child link="head_camera_rgb_optical_frame" />
        </joint>

        <link name="head_camera_depth_frame" />

        <joint name="head_camera_depth_joint" type="fixed">
            <origin rpy="0 0 0" xyz="0 0.045 0" />
            <parent link="head_camera_link" />
            <child link="head_camera_depth_frame" />
        </joint>

        <link name="head_camera_depth_optical_frame" />

        <joint name="head_camera_depth_optical_joint" type="fixed">
            <origin rpy="-1.57079632679 0 -1.57079632679" xyz="0 0 0" />
            <parent link="head_camera_depth_frame" />
            <child link="head_camera_depth_optical_frame" />
        </joint>

        <link name="head_external_camera_mount_link">
            <inertial>
                <origin rpy="0 0 0" xyz="0.00 -0.0025 0.013" />
                <mass value="0.072" />
                <inertia ixx="0.0061" ixy="-0.0" ixz="0.0002" iyy="0.0014" iyz="-0.0001" izz="0.0061" />
            </inertial>
            <visual>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                       <mesh filename="package://astro_description/meshes/head_external_camera_mount_link.stl" />
                </geometry>
                <material name="">
                    <color rgba="0.20 0.20 0.20 1" />
                </material>
            </visual>
            <collision>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <box size="0.099 0.020 0.023" />
                </geometry>
            </collision>
        </link>

        <joint name="head_external_camera_joint" type="fixed">
            <origin rpy="0 0 0" xyz="0.01 0.0625 0.055" />
            <parent link="head_tilt_link" />
            <child link="head_external_camera_mount_link" />
        </joint>


        <sensor_r435 name="Head Camera" parent="head_external_camera_mount_joint">
            <origin xyz="0 0 0" rpy="1 0 0"/>
        </sensor_r435>



        <link name="head_mic_mount_link">
            <inertial>
                <origin rpy="0 0 0" xyz="0.00 0.00 0.00" />
                <mass value="0.072" />
                <inertia ixx="0.0061" ixy="-0.0" ixz="0.0002" iyy="0.0014" iyz="-0.0001" izz="0.0061" />
            </inertial>
            <visual>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                       <mesh filename="package://astro_description/meshes/mic_mount_link.stl" />
                </geometry>
                <material name="">
                    <color rgba="0.20 0.20 0.20 1" />
                </material>
            </visual>
            <collision>
                <origin rpy="0 0 0" xyz="0 0 0" />
                <geometry>
                    <box size="0.07 0.07 0.003" />
                </geometry>
            </collision>
        </link>

        <joint name="head_mic_joint" type="fixed">
            <origin rpy="0 0 0" xyz="0.035 -0.0625 0.055" />
            <parent link="head_tilt_link" />
            <child link="head_mic_mount_link" />
        </joint>


    </xacro:macro>

</robot>